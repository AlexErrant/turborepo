---
title: run
description: API reference for the `turbo run` command.
---

import { Callout } from "#/components/Callout";

Run tasks specified in `turbo.json`.

```bash
turbo run [tasks] [options] [-- [args passed to tasks]]
```

- **[tasks]**: Turborepo can run one or many tasks at the same time. To run a task through `turbo`, it must be specified in `turbo.json`.
- **[options]**: Options are used to control the behavior of the `turbo run` command. Available flag options are described below.
- **[-- [args passed to tasks]]**: You may also pass arguments to the underlying scripts for your tasks to control their behavior. Note that all arguments will be passed to all tasks in the pipeline.

## Options

### `--cache-dir <path>`

Default: `./node_modules/.cache/turbo`

Specify local filesystem cache directory. Be sure to add this folder to your `.gitignore` if you change it from the default.

```sh
turbo run build --cache-dir="./my-cache"
```

### `--concurrency <number | percentage>`

Default: `10`

Set/limit the maximum concurrency for task execution. Must be an integer greater than or equal to `1` or a percentage value like `50%`.

- Use `1` to force serial execution (one task at a time).
- Use `100%` to use all available logical processors.
- This option is ignored if the [`--parallel`](#--parallel) flag is also passed.

```sh
turbo run build --concurrency=50%
turbo run test --concurrency=5
```

### `--continue`

Default: `false`

Continue with task execution in the presence of an error (e.g. non-zero exit code from a task).

When `--continue` is `true`, `turbo` will exit with the highest exit code value encountered during execution.

<Callout type="good-to-know">
Specifying [the `--parallel` flag](#--parallel) will automatically set `--continue` to `true` unless explicitly set to `false`.
</Callout>

```sh
turbo run build --continue
```

### `--cwd <path>`

Default: Directory of root `turbo.json`

Set the working directory of the command.

```sh
turbo run build --cwd=./somewhere/else/in/your/repo
```

### `--dry / --dry-run`

Instead of executing tasks, display details about the affected workspaces and tasks that would be run.

Specify `--dry=json` to get the output in JSON format.

Task details include:

| Field          | Description                                        |
| -------------- | -------------------------------------------------- |
| `command`      | The command used to run the task                   |
| `dependencies` | Tasks that must run **before** this task           |
| `dependents`   | Tasks that must run **after** this task            |
| `directory`    | The directory where the task will be run           |
| `hash`         | The hash of the task (used for caching)            |
| `logFile`      | Location of the log file for the task run          |
| `outputs`      | Location of outputs from the task that will cached |
| `package`      | The workspace in which to run the task             |
| `task`         | The name of the task to be executed                |

### `--env-mode <option>`

`type: string`

Controls the available environment variables in the task's runtime.

<Callout type="good-to-know">
`PATH`, `SHELL`, and `SYSTEMROOT` are always available to the task.
</Callout>

| option            | description                                                                                                                    |
| ----------------- | ------------------------------------------------------------------------------------------------------------------------------ |
| [infer](#infer)   | Infers strict mode or loose mode based on configuration                                                                        |
| [loose](#loose)   | Allow **all** environment variables to be available                                                                            |
| [strict](#strict) | Only allow environment variables listed in [the `env` key](/repo/docs/reference/configuration#env) for the task to be availabe |

#### `infer`

Turborepo will look for:

- [`globalPassThroughEnv`][2] in the root `turbo.json` configuration
- [`passThroughEnv`][1] for each task configuration

If either are defined, `strict` mode is inferred. If
neither is defined, then `loose` mode is inferred.

#### `loose`

All environment variables on the machine are made available to the task's runtime.

#### `strict`

Only environment variables specified in the following keys are
available to the task:

- [`env`](/repo/docs/reference/configuration#env)
- [`passThroughEnv`](/repo/docs/reference/configuration#passthroughenv)
- [`globalEnv`](/repo/docs/reference/configuration#globalenv)
- [`globalPassThroughEnv`](/repo/docs/reference/configuration#globalpassthroughenv)

If strict mode is specified or inferred, **all** tasks are run in `strict` mode,
regardless of their configuration.

### `--filter <string>`

Specify targets to execute from your repository's graph. Multiple filters can be combined to select distinct sets of targets.

Targets can be a combination of workspaces, directories, and git commits.

| Target type | Description                                                                    | Example                            |
| ----------- | ------------------------------------------------------------------------------ | ---------------------------------- |
| Package     | Select a package by its name in `package.json`                                 | `turbo run build --filter=acme-ui` |
| Directory   | Specify directories to capture a list of packages to run tasks                 | `turbo run build --filter=apps/*`  |
| Git commits | Using Git specifiers, specify packages with changes accordin to source control | `turbo run build --filter=HEAD^1`  |

#### Combining filters

You can combine multiple filters to further refine your targets.

```sh
# Any packages in apps subdirectories that have changed since the last commit
turbo run build --filter=.apps/* --filter=HEAD~1

# Any packages in apps subdirectories except ./apps/admin
turbo run build --filter=./apps/* --filter=!./apps/admin

# Run the build task for the docs and web packages
turbo run build --filter=docs --filter=web
```

For in-depth discussion and practical use cases of filtering, visit [the Running Tasks page](/TODO-LINK).

### `--graph <file type>`

Default: `jpg`

This command will generate an `svg`, `png`, `jpg`, `pdf`, `json`, `html`, or [other supported output formats](https://graphviz.org/doc/info/output.html) of the current task graph.

If Graphviz is not installed, or no filename is provided, this command prints the dot graph to `stdout`.

```sh
turbo run build --graph
turbo run build test lint --graph=my-graph.svg
```

<Callout type="info">
  **Known Bug**: All possible pipeline task nodes will be added to the graph at
  the moment, even if that pipeline task does not actually exist in a given
  workspace. This has no impact on execution, but the graph may overstate the number of packages and tasks involved in the pipeline.
</Callout>

### `--force`

Ignore existing cached artifacts and re-execute all tasks from scratch.

<Callout type="good-to-know">
`--force` will overwrite existing task caches that overlap with the pipeline.
</Callout>

```sh
turbo run build --force
```

The same behavior also be set via the `TURBO_FORCE=true` environment variable.

### `--global-deps <file glob>`

Specify glob of global filesystem dependencies to be hashed. Useful for `.env` and files in the root directory that impact multiple packages/apps.

```sh
turbo run build --global-deps=".env"
turbo run build --global-deps=".env.*" --global-deps=".eslintrc" --global-deps="jest.config.js"
```

<Callout type="good-to-know">
We recommend specifying file globs that you'd like to include your hashes in [the `globalDependencies` key](/repo/docs/reference/configuration#globaldeps) in `turbo.json` to make sure they are always accounted for.
</Callout>

### `--framework-inference`

Default: `true`

Specify whether or not to do [Framework Inference](/TODO-LINK) for tasks.

When `false`, [Automatic Environment Variable Inclusion](/repo/docs/core-concepts/caching/environment-variable-inputs#framework-inference) is disabled.

```sh
turbo run build --framework-inference=false
```

### `--ignore <file glob>`

Ignore **files or directories** from impacting scope. This flag **does not** affect task inputs or outputs.

```sh
turbo run build --ignore="apps/**/*"
turbo run build --ignore="packages/**/*"
turbo run build --ignore="packages/**/*" --ignore="\!/packages/not-this-one/**/*"
```

#### Globbing patterns

| Pattern | Description                                                                                    |
| ------- | ---------------------------------------------------------------------------------------------- |
| `*`     | Matches any number of characters, but not `/`                                                  |
| `**`    | Matches any number of characters, including `/`, as long as it's the only thing in a path part |
| `?`     | Matches a single character, but not `/`                                                        |
| `{}`    | Allows for a comma-separated list of "or" expressions                                          |
| `!`     | At the beginning of a pattern will negate the match                                            |

### `--log-order <option>`

Default: `auto`

Set the ordering for log output.

By default, `turbo` will use `grouped` logs in CI environments and `stream` logs everywhere else.

```shell
turbo run build --log-order=stream
```

| Option    | Description                               |
| --------- | ----------------------------------------- |
| `stream`  | Show output as soon as it is available    |
| `grouped` | Group output by task                      |
| `auto`    | Turbo decides based on its own heuristics |

### `--log-prefix <option>`

Control the `<package>:<task>:` prefix for log lines produced when running tasks.

```shell
turbo run dev --log-prefix=none
```

| Option | Description                                                                  |
| ------ | ---------------------------------------------------------------------------- |
| auto   | Turbo decides based on its own heuristics (TODO: What are these heuristics?) |
| none   | No prefixes                                                                  |
| prefix | Force prepending the prefix to logs                                          |

### `--no-cache`

Default `false`.

Do not cache results of the task.

```shell
turbo run dev --no-cache
```

### `--no-daemon`

Default: `false`.

`turbo` can run a background process to precalculate values used for determining work that needs to be done. This standalone process (daemon) is an optimization, and not required for proper functioning of `turbo`.

Passing `--no-daemon` instructs `turbo` to avoid using or creating the standalone process.

### `--output-logs <option>`

Default: `full`

Set type of output logging, overriding [`outputMode`](/repo/docs/reference/configuration#outputmode) if it's defined in `turbo.json`.

```shell
turbo run build --output-logs=errors-only
```

| Option        | Description                       |
| ------------- | --------------------------------- |
| `full`        | Displays all logs                 |
| `hash-only`   | Only show the hashes of the tasks |
| `new-only`    | Only show logs from cache misses  |
| `errors-only` | Only show logs from task failures |
| `none`        | Hides all task logs               |

### `--only`

Default: `false`

Restricts execution to include specified tasks only.

#### Example

Given this pipeline in `turbo.json`:

```json
{
  "$schema": "https://turbo.build/schema.json",
  "pipeline": {
    "build": {
      "dependsOn": ["^build"]
    },
    "test": {
      "dependsOn": ["^build"]
    }
  }
}
```

```shell
turbo run test --only
```

The command will _only_ execute the `test` tasks in each package. It will not `build`.

### `--parallel`

Default: `false`

Run commands in parallel across workspaces, ignoring the task dependency graph.

```sh
turbo run lint --parallel
turbo run dev --parallel
```

<Callout type="info">
  The `--parallel` flag is typically used for long-running "dev" or "watch" tasks that
  don't exit. Starting in `turbo@1.7`, we recommend configuring these tasks
  using the [`persistent`](/repo/docs/reference/configuration#persistent) config
  instead.
</Callout>

### `--profile`

Generates a trace of the run in Chrome Tracing format that you can use to analyze performance.

You must provide a verbosity flag (`-v`, `-vv`, or `-vvv`) with `--profile` to produce a trace.

```sh
turbo run build --profile=profile.json -vvv
```

Profiles can be viewed in tool like [Perfetto](https://ui.perfetto.dev/).

### `--remote-cache-timeout`

Default: `30`

Set the timeout for Remote Cache operations in seconds.

```shell
turbo run build --remote-cache-timeout=60
```

### `--remote-only`

Default: `false`

Ignore the local filesystem cache for all tasks, using Remote Cache for reading and caching task outputs.

```shell
turbo run build --remote-only
```

### `--summarize`

Generates a JSON file in `.turbo/runs` containing metadata about the run, including:

- Affected packages
- Executed tasks (including their timings and hashes)
- All the files included in the cached artifact

This flag can be helpful for debugging to determine things like:

- How `turbo` interpreted your glob syntax for `inputs` and `outputs`
- What inputs changed between two task runs to produce a cache miss
- How task timings changed over time

### `--token`

A bearer token for Remote Caching. Useful for running in non-interactive shells in combination with `--team` flags.

```sh
turbo run build --team=my-team --token=xxxxxxxxxxxxxxxxx
```

This value can also be set using [the `TURBO_TOKEN` system variable](/TODO-LINK). If both are present, the flag value will override the system variable.

<Callout type="good-to-know">
If you are using [Vercel Remote Cache](https://vercel.com/docs/monorepos/remote-caching) and building your project on Vercel, you do not need to use this flag. This value will be automatically set for you.
</Callout>

### `--team`

The slug of the Remote Cache team. Useful for running in non-interactive shells in combination with the `--token` flag.

```sh
turbo run build --team=my-team
turbo run build --team=my-team --token=xxxxxxxxxxxxxxxxx
```

This value can also be set using [the `TURBO_TEAM` system variable](/TODO-LINK). If both are present, the flag value will override the system variable.

### `--preflight`

Only applicable when Remote Caching is configured. Enables sending a preflight request before every cache artifact and analytics request. The follow-up upload and download will follow redirects.

```sh
turbo run build --preflight
```

The same behavior can also be set via the `TURBO_PREFLIGHT=true` system variable.

### `--verbosity`

To specify log level, use `--verbosity=<num>` or `-v, -vv, -vvv`.

| Level | Flag value      | Shorthand |
| ----- | --------------- | --------- |
| Info  | `--verbosity=1` | `-v`      |
| Debug | `--verbosity=2` | `-vv`     |
| Trace | `--verbosity=3` | `-vvv`    |

```sh
turbo run build --verbosity=2
turbo run build -vvv
```

## Deprecated Options

### `--cpuprofile <file name>`

<Callout type="error">
  `--cpuprofile` is deprecated in `1.11.x`. Please use [`--profile`](#--profile)
  instead.
</Callout>

Outputs a CPU profile to the given file Drop the file into a tool like [speedscope](https://www.speedscope.app/).

```sh
turbo run build --cpuprofile="<cpu-profile-file-name>"
```

<Callout>
  The CPU profiler doesn't work under Windows Subsystem for
  Linux. The profiler has to be built for native Windows and run using the
  command prompt instead.
</Callout>

### `--include-dependencies`

<Callout type="error">
  `--include-dependencies` is deprecated in `1.2.x`. Please use
  [`--filter`](/repo/docs/core-concepts/monorepos/filtering#include-dependencies-of-matched-workspaces)
  instead.
</Callout>

Default: `false`

When `true`, `turbo` will add any packages that the packages in the current execution _depend_ on (i.e. those declared in `dependencies` or `devDependencies`).

### `--deps`

<Callout type="error">
  `--deps` is deprecated in `1.2.x`. Please use
  [`--filter`](/repo/docs/core-concepts/monorepos/filtering#include-dependents-of-matched-workspaces)
  instead.
</Callout>

Default: `true`

Include dependent package consumers in the execution.

```sh
turbo run build --deps
turbo run build --no-deps
```

### `--heap <file name>`

<Callout type="error">
  `--heap` is deprecated in `1.2.x`. Please use [`--profile`](#--profile)
  instead.
</Callout>

Outputs the trace to the given file. To view the trace, use `go tool pprof [file]` and type `top`. You can also drop it into [speedscope](https://www.speedscope.app/) and use the `left heavy` or `sandwich` view modes.

```sh
turbo run build --heap="<heap-file-name>"
```

### `--scope <package name>`

<Callout type="error">
  `--scope` is deprecated in `1.2.x`. Please use
  [`--filter`](/repo/docs/core-concepts/monorepos/filtering#filter-by-package)
  instead.
</Callout>

Specify/filter workspaces to act as entry points for execution. Globs against
`package.json` `name` field (and not the file system.)

```sh
turbo run lint --scope="@example/**"
turbo run dev --scope="@example/a" --scope="@example/b" --no-cache --no-deps
```

### `--since <git ref>`

<Callout type="error">
  `--since` is deprecated in `1.2.x`, use
  [`--filter`](/repo/docs/core-concepts/monorepos/filtering#filter-by-changed-workspaces)
  instead.
</Callout>

Filter execution based on which packages have changed since a merge-base.

```sh
turbo run build --since=origin/main
```

<Callout type="warn">
  **Important**: This uses the `git diff ${target_branch}...` mechanism to
  identify which workspaces have changed. There is an assumption that all the
  input files for a workspace exist inside their respective workspace folders.
</Callout>

### `--trace <file name>`

<Callout type="error">
  `--trace` is deprecated in `1.11.x`, use [`--profile`](#--profile) instead.
</Callout>

Outputs the trace to the given file. To view the trace, use `go tool trace [file]`.

<Callout>
  **Important**: The trace viewer doesn't work under Windows Subsystem for
  Linux.
</Callout>

```sh
turbo run build --trace="<trace-file-name>"
```

[1]: /repo/docs/reference/configuration#passThroughEnv
[2]: /repo/docs/reference/configuration#globalPassThroughEnv
[3]: /repo/docs/core-concepts/monorepos/filtering
